{% extends 'layout_mentor.html.twig' %}

{% block title %} - {{ mentor.lastname }} {{ mentor.firstname }}{% endblock %}

{% block body %}

    {% for message in app.session.flashbag.get('success') %}
        <div class="alert alert-success alert-dismissible">
            <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
            <h4><i class="icon fa fa-check"></i>Information</h4>
            {{ message }}
        </div>
    {% endfor %}

    {% if(app.user.available == false) %}
        <div class="col-md-12">
            <div class="alert alert-info">Vous êtes actuellement indisponible, vous ne pouvez donc pas avoir de soutenances, voire de nouveaux mentorés. Lorsque vous serez
                de nouveau disponible, cliquez sur le bouton "Me rendre disponible" ! A bientôt !</div>
        </div>
    {% endif %}
    <div class="row">
        <div class="col-sm-4 col-md-5">
            <div class="box box-primary">
                <div class="box-body box-profile">
                    {% if mentor.profileImage is empty %}
                        <img class="profile-user-img img-responsive img-circle" src="{{ asset('img/avatars/user-default.png') }}" alt="User profile picture">
                    {% else %}
                        <img class="profile-user-img img-responsive img-circle" src="{{ mentor.profileImage }}" alt="Teacher profile image" />
                    {% endif %}
                    <h3 class="profile-username text-center"><p>{{ mentor.firstname }} {{ mentor.lastname }}</p></h3>
                    <ul class="list-group list-group-unbordered">
                        <li class="list-group-item">
                            <b>Statut : </b>
                            <p class="pull-right">
                                {% if mentor.available == true %}
                                        <span class="label label-success">Disponible</span>
                                    {% else %}
                                        <span class="label label-danger">indisponible</span>
                                {% endif %}
                            </p>
                        </li>
                        <li class="list-group-item">
                            <b>Nombre d'élèves maximum souhaité : </b> <p class="pull-right">0</p>
                        </li>
                        <li class="list-group-item">
                            <b>Nombre d'élèves : </b> <p class="pull-right">{{ nbMentores|length }}</p>
                        </li>
                        <li class="list-group-item">
                            <b>Nombre de soutenances effectuées : </b> <p class="pull-right">{{ nbSoutenances|length }}</p>
                        </li>
                    </ul>
                    {% if app.user.id != mentor.id %}
                        <a href="#" class="btn btn-primary btn-flat btn-block" data-toggle="modal" data-target="#myModalContact"><b>Contacter par email</b></a>
                    {% endif %}
                </div>
            </div>
            <div class="box box-primary">
                <div class="box-header with-border">
                    <h3 class="box-title">A propos</h3>
                </div>
                <div class="box-body">
                    <strong>
                        <i class="fa fa-book margin-r-5"></i>Biographie
                    </strong>
                    <hr>
                    <strong>
                        <i class="fa fa-map-marker margin-r-5"></i>Emplacement
                    </strong>
                    <p class="text-muted">{{ mentor.country.libelle }}</p>
                    <hr>
                    <strong><i class="fa fa-pencil margin-r-5"></i> Compétences</strong>
                    <p>
                    {% if app.user.competences %}
                        {% for competence in mentor.competences %}
                            {% for label in competence.libelle %}
                                <span class="label label-warning">{{ label }}</span>
                            {% endfor %}
                        {% endfor %}
                    {% endif %}
                    </p>
                </div>
            </div>
        </div>
        <div class="col-sm-8 col-md-7 col-lg-7">
            <div class="nav-tabs-custom">
                <ul class="nav nav-tabs">
                    <li class="active"><a href="#activity" data-toggle="tab">Activités récentes</a></li>
                    <li><a href="#student" data-toggle="tab">Suivi Elèves</a></li>
                    {% if app.user.id == mentor.id %}
                        <li><a href="#sessions" data-toggle="tab">Suivi sessions</a></li>
                        <li><a href="#facturation" data-toggle="tab">Suivi facturation</a></li>
                    {% endif %}
                    {% if is_granted('ROLE_ADMIN') or app.user == mentor.id %}
                        <li><a href="#settings" data-toggle="tab">Options</a></li>
                    {% endif %}
                </ul>
                <div class="tab-content">
                    <div class="active tab-pane" id="activity">
                        <div class="post">
                            <div class="user-block">
                                <img class="img-circle img-bordered-sm" src="{{ asset('img/avatars/user-default.png') }}" alt="user image">
                                <span class="username">
                                    <a href="#">{{ mentor.firstname }} {{ mentor.lastname }}</a>
                                </span>
                                <span class="description">Shared publicly - 7:30 PM today</span>
                            </div>
                            <p>
                                Lorem ipsum represents a long-held tradition for designers,
                                typographers and the like. Some people hate it and argue for
                                its demise, but others ignore the hate as they create awesome
                                tools to help create filler text for everyone from bacon lovers
                                to Charlie Sheen fans.
                            </p>
                        </div>
                    </div>

                    {% include ':Elements/Box/Teacher/Profile:show_student.html.twig' %}

                    {% if app.user.id == mentor.id %}

                        {% include ':Elements/Box/Teacher/Profile:show_sessions.html.twig' %}

                    {% endif %}
                    {% if app.user.id == mentor.id %}
                        <div class="tab-pane" id="facturation">
                            <!-- Suivi facturation -->
                            <div class="table-responsive">
                                <table class="table no-margin">
                                    <thead>
                                    <tr>
                                        <th>Date de facturation</th>
                                        <th>Nombre de sessions facturées</th>
                                        <th>Statut</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        {% include ':Elements/Box/Teacher/Profile:show_settings.html.twig' %}

                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    {% include ':Form/Contact:register_mentor_contact.html.twig' %}

{% endblock %}
